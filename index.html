<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Background Flow</title>
    <link rel="stylesheet" href="/public/styles.css" />
    <script
      type="module"
      src="https://cdn.jsdelivr.net/npm/ionicons/dist/ionicons/ionicons.esm.js"
    ></script>
    <noscript
      ><script src="https://cdn.jsdelivr.net/npm/ionicons/dist/ionicons/ionicons.js"></script
    ></noscript>
  </head>
  <body>
    <div id="background"></div>
    <video id="backgroundVideo" autoplay muted loop></video>

    <div id="welcomeOverlay" class="welcome-overlay">
      <div class="welcome-content">
        <button id="playButton" class="play-button" title="Start Experience">
          <ion-icon name="play"></ion-icon>
        </button>
      </div>
    </div>

    <div id="createMessage" class="create-message">
      <span>Create your experience</span>
    </div>

    <div class="button-container">
      <button class="bg-button" id="bgButton" title="Select Background">
        <ion-icon name="image"></ion-icon>
      </button>
      <button class="sound-button" id="soundButton" title="Select Sound">
        <ion-icon name="volume-high"></ion-icon>
      </button>
      <button
        class="control-button"
        id="fullscreenButton"
        title="Toggle Fullscreen"
      >
        <ion-icon name="expand"></ion-icon>
      </button>
      <button
        class="control-button"
        id="clearButton"
        title="Clear All Settings"
      >
        <ion-icon name="trash"></ion-icon>
      </button>
    </div>

    <div class="modal" id="bgModal">
      <div class="modal-content">
        <div class="modal-header">
          <h2>Select Background</h2>
          <button class="modal-close" id="closeModal">
            <ion-icon name="close"></ion-icon>
          </button>
        </div>
        <div class="modal-body">
          <div class="bg-grid">
            {{range .Backgrounds}}
            <button
              class="bg-grid-item"
              data-bg-path="{{.Path}}"
              data-bg-type="{{.Type}}"
              title="{{.Name}}"
            >
              <img src="/public/bkgs/{{.Thumbnail}}" alt="{{.Name}}" />
              <span>{{.Name}}</span>
            </button>
            {{end}}
          </div>
        </div>
      </div>
    </div>

    <div class="modal" id="soundModal">
      <div class="modal-content modal-sounds">
        <div class="modal-header">
          <h2>Ambient Sounds</h2>
          <button class="modal-close" id="closeSoundModal">
            <ion-icon name="close"></ion-icon>
          </button>
        </div>
        <div class="modal-body">
          <div class="global-volume-control">
            <label for="globalVolumeSlider">Global Volume</label>
            <input
              type="range"
              id="globalVolumeSlider"
              class="volume-slider"
              min="0"
              max="100"
              value="50"
            />
            <span id="globalVolumeValue">50%</span>
          </div>

          <div class="columns">
            <div class="sounds-grid">
              {{range .Sounds}}
              <button
                class="sound-button-grid"
                data-sound-path="{{.Path}}"
                data-sound-name="{{.Name}}"
                title="{{.Name}}"
              >
                <ion-icon name="{{.Icon}}"></ion-icon>
                <span>{{.Name}}</span>
              </button>
              {{end}}
            </div>

            <div class="active-sounds-container" id="activeSoundsContainer">
              <h3>Active Sounds</h3>
              <div class="active-sounds-list" id="activeSoundsList"></div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/@ionic/core/dist/ionic.js"></script>
    <script src="/public/app.js"></script>
  </body>
</html>
